<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON Generator + QRIS</title>
    <style>
        body { font-family: sans-serif; background: #f4f4f4; padding: 20px; }
        .container { max-width: 600px; margin: auto; background: #fff; padding: 25px; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: #b2945e; }
        label { display: block; margin-top: 15px; font-weight: bold; font-size: 13px; }
        input, textarea { width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box; }
        .qris-box { background: #fff9f0; padding: 10px; border: 1px dashed #b2945e; border-radius: 8px; margin-top: 10px; }
        button { width: 100%; padding: 15px; background: #b2945e; color: white; border: none; border-radius: 8px; margin-top: 20px; cursor: pointer; font-weight: bold; font-size: 16px; }
        button:hover { background: #967d4f; }
        pre { background: #222; color: #0f0; padding: 15px; border-radius: 5px; margin-top: 20px; overflow-x: auto; font-size: 12px; display: none; }
    </style>
</head>
<body>

<div class="container">
    <h2>JSON Generator</h2>
    
    <label>Judul Undangan</label>
    <input type="text" id="in_title" value="The Wedding of Anang & Indri">

    <label>Nama Pria</label>
    <input type="text" id="in_g_name" placeholder="Anang">
    <label>Orang Tua Pria</label>
    <input type="text" id="in_g_parent" placeholder="Bapak A & Ibu A">

    <label>Nama Wanita</label>
    <input type="text" id="in_b_name" placeholder="Indri">
    <label>Orang Tua Wanita</label>
    <input type="text" id="in_b_parent" placeholder="Bapak B & Ibu B">

    <label>Tanggal Akad (YYYY-MM-DD)</label>
    <input type="date" id="in_akad_date">
    <label>Jam Akad</label>
    <input type="text" id="in_akad_time" placeholder="08.00 WIB">

    <label>Tanggal Resepsi</label>
    <input type="date" id="in_res_date">
    <label>Jam Resepsi</label>
    <input type="text" id="in_res_time" placeholder="10.00 - Selesai">

    <label>Lokasi (Teks Singkat)</label>
    <input type="text" id="in_loc" placeholder="Gesikan">
    
    <label>Google Maps Link (Embed Src)</label>
    <input type="text" id="in_maps" placeholder="https://google.com/maps/embed...">

    <label>WhatsApp (628...)</label>
    <input type="text" id="in_phone" placeholder="6283851284221">

    <label>Quotes</label>
    <textarea id="in_quote">Dan di antara tanda-tanda kekuasaan-Nya...</textarea>

    <label>Nama Foto (Pisahkan dengan koma)</label>
    <input type="text" id="in_pics" placeholder="foto1.jpg, foto2.jpg">

    <div class="qris-box">
        <label>Nama File QRIS (jpg/png)</label>
        <input type="text" id="in_qris" placeholder="qris.jpg" value="qris.jpg">
        <small style="color: #888; font-size: 11px;">*Upload file ini ke folder /images/ di GitHub Anda</small>
    </div>

    <button type="button" onclick="prosesDownload()">DOWNLOAD JSON</button>

    <pre id="hasilPreview"></pre>
</div>

<script>
function prosesDownload() {
    try {
        const galleryRaw = document.getElementById("in_pics").value;
        const galleryArray = galleryRaw ? galleryRaw.split(",").map(item => item.trim()) : ["foto1.jpg"];

        // Susun Objek
        const dataUndangan = {
            "title": document.getElementById("in_title").value,
            "groom": {
                "name": document.getElementById("in_g_name").value || "Pria",
                "parent": document.getElementById("in_g_parent").value || "Ortu Pria"
            },
            "bride": {
                "name": document.getElementById("in_b_name").value || "Wanita",
                "parent": document.getElementById("in_b_parent").value || "Ortu Wanita"
            },
            "akad": {
                "date": document.getElementById("in_akad_date").value,
                "time": document.getElementById("in_akad_time").value
            },
            "resepsi": {
                "date": document.getElementById("in_res_date").value,
                "time": document.getElementById("in_res_time").value
            },
            "location": document.getElementById("in_loc").value,
            "maps": document.getElementById("in_maps").value,
            "phone": document.getElementById("in_phone").value,
            "quote": document.getElementById("in_quote").value,
            "gallery": galleryArray,
            "qris": document.getElementById("in_qris").value // DATA QRIS DISINI
        };

        const stringData = JSON.stringify(dataUndangan, null, 2);

        const previewEl = document.getElementById("hasilPreview");
        previewEl.innerText = stringData;
        previewEl.style.display = "block";

        const blob = new Blob([stringData], { type: "application/json" });
        const url = window.URL.createObjectURL(blob);
        const linkDownload = document.createElement("a");
        
        linkDownload.href = url;
        linkDownload.setAttribute("download", `${dataUndangan.groom.name.toLowerCase().replace(/\s/g, '_')}_invitation.json`);
        
        document.body.appendChild(linkDownload);
        linkDownload.click();
        
        document.body.removeChild(linkDownload);
        window.URL.revokeObjectURL(url);

    } catch (error) {
        alert("Terjadi kesalahan: " + error.message);
    }
}
</script>

</body>
</html>
