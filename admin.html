<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Generator JSON Undangan</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #f7f3e8, #fff);
            padding: 20px;
            color: #333;
        }
        .container {
            max-width: 700px;
            margin: auto;
            background: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,.08);
        }
        h2 { text-align: center; color: #d4af37; margin-bottom: 30px; }
        label { font-weight: 600; margin-top: 15px; display: block; font-size: 14px; }
        input, textarea {
            width: 100%;
            padding: 12px;
            margin-top: 6px;
            border-radius: 8px;
            border: 1px solid #ddd;
            box-sizing: border-box;
            font-size: 14px;
        }
        textarea { min-height: 80px; resize: vertical; }
        hr { margin: 30px 0; border: 0; border-top: 1px solid #eee; }
        
        button {
            margin-top: 25px;
            width: 100%;
            background: #d4af37;
            border: none;
            padding: 16px;
            color: #fff;
            font-size: 16px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
        }
        button:hover { background: #b8952d; }

        #preview-container {
            display: none;
            margin-top: 30px;
        }
        #preview {
            background: #272822;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            white-space: pre-wrap;
            overflow-x: auto;
        }
        .note {
            margin-top: 10px;
            font-size: 12px;
            color: #e53935;
            line-height: 1.5;
            background: #fff8f8;
            padding: 10px;
            border-radius: 6px;
        }
    </style>
</head>
<body>

<div class="container">
    <h2>JSON Generator Undangan</h2>

    <label>Judul Undangan</label>
    <input id="title" placeholder="The Wedding of Anang & Indri">

    <hr>

    <label>Nama Mempelai Pria</label>
    <input id="g_name" placeholder="Contoh: Anang">

    <label>Putra Dari (Ayah & Ibu Pria)</label>
    <input id="g_parent" placeholder="Contoh: Bapak A & Ibu A">

    <label>Nama Mempelai Wanita</label>
    <input id="b_name" placeholder="Contoh: Indri">

    <label>Putri Dari (Ayah & Ibu Wanita)</label>
    <input id="b_parent" placeholder="Contoh: Bapak B & Ibu B">

    <hr>

    <label>Tanggal Akad</label>
    <input id="akad_date" type="date">

    <label>Jam Akad</label>
    <input id="akad_time" placeholder="Contoh: 08.00 WIB">

    <label>Tanggal Resepsi</label>
    <input id="res_date" type="date">

    <label>Jam Resepsi</label>
    <input id="res_time" placeholder="Contoh: 10.00 - Selesai">

    <hr>

    <label>Alamat Acara (Teks Singkat)</label>
    <textarea id="location_text" placeholder="Contoh: Gesikan"></textarea>

    <label>Google Maps Link (Link Embed/Iframe Src)</label>
    <input id="maps_link" placeholder="http://maps.google.com/...">

    <label>No WhatsApp Konfirmasi (Gunakan 62)</label>
    <input id="phone_num" placeholder="Contoh: 6283851284221">

    <hr>

    <label>Quotes / Doa Pernikahan</label>
    <textarea id="quote_text" placeholder="Dan di antara tanda-tanda kekuasaan-Nya..."></textarea>

    <label>Nama File Foto Galeri (Pisahkan dengan koma)</label>
    <input id="pics_list" placeholder="foto1.jpg, foto2.jpg, foto3.png">
    
    <div class="note">
        <strong>PENTING:</strong> Masukkan nama file saja yang dipisahkan koma. <br>
        Contoh: <strong>img1.jpg, img2.jpg</strong>. Pastikan file ini sudah diunggah ke GitHub folder <strong>/images</strong>.
    </div>

    <button onclick="generateJSON()">Download & Lihat JSON</button>

    <div id="preview-container">
        <label>Preview Hasil JSON:</label>
        <pre id="preview"></pre>
    </div>
</div>

<script>
function generateJSON() {
    // Ambil data dari input
    const titleVal = document.getElementById("title").value || "The Wedding of Anang & Indri";
    const gName = document.getElementById("g_name").value || "Anang";
    const gParent = document.getElementById("g_parent").value || "Bapak & Ibu";
    const bName = document.getElementById("b_name").value || "Indri";
    const bParent = document.getElementById("b_parent").value || "Bapak & Ibu";
    
    const akadD = document.getElementById("akad_date").value || "";
    const akadT = document.getElementById("akad_time").value || "08.00 WIB";
    const resD = document.getElementById("res_date").value || "";
    const resT = document.getElementById("res_time").value || "10.00 - Selesai";
    
    const locText = document.getElementById("location_text").value || "";
    const mapsLink = document.getElementById("maps_link").value || "";
    const phone = document.getElementById("phone_num").value || "628";
    const quote = document.getElementById("quote_text").value || "";
    
    // Proses Foto menjadi Array
    const picsInput = document.getElementById("pics_list").value;
    const galleryArray = picsInput 
        ? picsInput.split(",").map(f => f.trim()).filter(Boolean) 
        : ["foto1.jpg", "foto2.jpg"];

    // Susun Objek JSON sesuai format permintaan
    const data = {
        "title": titleVal,
        "groom": {
            "name": gName,
            "parent": gParent
        },
        "bride": {
            "name": bName,
            "parent": bParent
        },
        "akad": {
            "date": akadD,
            "time": akadT
        },
        "resepsi": {
            "date": resD,
            "time": resT
        },
        "location": locText,
        "maps": mapsLink,
        "phone": phone,
        "quote": quote,
        "gallery": galleryArray
    };

    // Tampilkan Preview
    const previewContainer = document.getElementById("preview-container");
    const previewBox = document.getElementById("preview");
    const jsonString = JSON.stringify(data, null, 2);
    
    previewContainer.style.display = "block";
    previewBox.textContent = jsonString;

    // Proses Download
    const blob = new Blob([jsonString], { type: "application/json" });
    const url = URL.createObjectURL(blob);
    const link = document.createElement("a");
    
    link.href = url;
    // Nama file otomatis mengikuti nama pengantin pria
    link.download = `${gName.toLowerCase()}_invitation.json`;
    link.click();
    
    // Cleanup
    URL.revokeObjectURL(url);
}
</script>

</body>
</html>
